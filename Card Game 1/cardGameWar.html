<html lang="en" dir="ltr">

<head>
    <title>War!</title>
    <link rel="stylesheet" href="./cardGameWar.css">
    <style>
        body {
            background-color: lightsteelblue;
        }
    </style>
</head>
<header style="font-size: 250%; text-align: center">
    Card Game: War!
</header>

<body>
    <div class="footer">
        <button onclick="test()" type="button" class="buttons" name="newGame" width="200">New Game</button>
        <button onclick="nextRound()" type="button" class="buttons" id="nextRound" name="nextRound">Next Round</button>
        <h2 id="00h2" style="font-size: 125%"></h2>
    </div>
    <div class="row">
        <div class="column side">
            <h2 class="p1Dec">Student</h2>
            <h3>Deck</h3>
            <div class="deck">
                <img onmouseover="getP1DeckCount()" class="cards" src="./Card_Example/Deck/purple_back.jpg"></img>
                <div class="inside">
                    <div class="text">John Doe</div>
                </div>
            </div>
            <h3>Discard Pile</h3>
            <div class="discard">
                <img class="cards" id="p1Disc" src='./Card_Example/Deck/purple_back.jpg'></img>
            </div>
        </div>


        <div class="column middle">
            <h2> Playing Field</h2>
            <div class="column middle L">
                <img class="cards" id="p1Deck"></img>
            </div>
            <div class="column middle R">
                <img class="cards" id="p2Deck"></img>
            </div>
            <div class="column middle M">
                <h1 id="win"></h1>
            </div>
            <div class="column middle L">
                <h2>Player 1's Score:</h2>
                <p class="score" id="p1Score"></p>
            </div>
            <div class="column middle R">
                <h2>Michaels' Score:</h2>
                <p class="score" id="p2Score"></p>
            </div>
        </div>


        <div class="column side">
            <h2 class="p2Dec">Michaels</h2>
            <h3>Deck</h3>
            <div class="deck">
                <img onmouseover="getP2DeckCount()" class="cards" id="p2Play" src="./Card_Example/Deck/purple_back.jpg"></img>
                <div class="inside">
                    <div class="text">John Doe</div>
                </div>
            </div>
            <h3>Discard Pile</h3>
            <div class="discard">
                <img class="cards" id="p2Disc" src='./Card_Example/Deck/purple_back.jpg'></img>
            </div>
        </div>
    </div>


    <script src="Card_Example/card.js"></script>
    <script>
        var state = 0;
        var pl1Deck = [];
        var pl2Deck = [];
        var p1Score = 0;
        var p2Score = 0;
        var tmp = new Deck();

        for (var i = 0; i < 26; i++) {
            pl1Deck[i] = tmp.deck[i];
        }
        for (var i = 0; i < 26; i++) {
            pl2Deck[i] = tmp.deck[i + 26];
        }
        document.getElementById('p1Score').innerHTML = p1Score;
        document.getElementById('p2Score').innerHTML = p2Score;
        // console.log(tmp.deck);
        // console.log(pl1Deck);
        // console.log(pl2Deck);

        function test() {
            // state = 0;
            pl1Deck = [];
            pl2Deck = [];
            tmp = new Deck()
            for (var i = 0; i < 26; i++) {
                pl1Deck[i] = tmp.deck[i];
            }
            for (var i = 0; i < 26; i++) {
                pl2Deck[i] = tmp.deck[i + 26];
            }
            // p1PDeck = document.getElementById('p1Deck');
            // p1PDeck.parentNode.removeChild(p1PDeck);
            // p2Deck = document.getElementsByClassName('p2Play');
            // p1Disc = document.getElementsByClassName('p1Disc');
            // p2Disc = document.getElementsByClassName('p2Disc');
            document.getElementById('p1Deck').src = './Card_Example/Deck/purple_back.jpg';
            document.getElementById('p2Deck').src = './Card_Example/Deck/purple_back.jpg';
            document.getElementById('p1Disc').src = './Card_Example/Deck/purple_back.jpg';
            document.getElementById('p2Disc').src = './Card_Example/Deck/purple_back.jpg';

            p1Score = 0;
            p2Score = 0;
            document.getElementById('p1Score').innerHTML = p1Score;
            document.getElementById('p2Score').innerHTML = p2Score;

            document.getElementById('win').innerHTML = "Decks have been reset";
            document.getElementById('nextRound').disabled = false;
        }

        function getP1DeckCount() {
            console.log(pl1Deck.length);
        }

        function getP2DeckCount() {
            console.log(pl2Deck.length)
        }

        function nextRound() {
            // if (state = 0) {
            //     state = 1;
            //     document.createElement("IMG");
            //
            // }
            console.log(pl1Deck.length);
            if (pl1Deck.length == 0 && pl2Deck.length == 0) {
                document.getElementById('nextRound').disabled = true;
                alert("Players are out of cards and nextRound button has been disabled\n" +
                    "Press new game to reset!")
            } else {
                var pCardPlayed = get_top_card(pl1Deck);
                var mCardPlayed = get_top_card(pl2Deck);
                var pCurrentCard = document.getElementById('p1Deck').src;
                var mCurrentCard = document.getElementById('p2Deck').src;
                document.getElementById('p1Deck').src = pCardPlayed.icon;
                document.getElementById('p2Deck').src = mCardPlayed.icon;
                if (pCardPlayed.face > mCardPlayed.face) {
                    document.getElementById('win').innerHTML = "^== Player wins this round!";
                    p1Score++;
                } else if (pCardPlayed.face == mCardPlayed.face) {
                    if (pCardPlayed.suit > mCardPlayed.suit) {
                        document.getElementById('win').innerHTML = "^== Player wins this round!";
                        p1Score++;

                    } else {
                        document.getElementById('win').innerHTML = "Michaels wins this round! ==^";
                        p2Score++;
                    }
                } else {
                    document.getElementById('win').innerHTML = "Michaels wins this round! ==^";
                    p2Score++;
                }
                document.getElementById('p1Score').innerHTML = p1Score;
                document.getElementById('p2Score').innerHTML = p2Score;

                if (pl1Deck.length < 25 || pl2Deck.length < 25) {
                    document.getElementById('p1Disc').src = pCurrentCard;
                    document.getElementById('p2Disc').src = mCurrentCard;
                }
            }
        }
    </script>
</body>

</html>